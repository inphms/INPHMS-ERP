<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">

<t t-name="hr_attendance.companyHeader">
    <img t-att-src="companyImageUrl" alt="Company Logo" class="o_hr_attendance_kiosk_company_image align-self-center"/>
</t>

<t t-name="hr_attendance.BarcodeScanner" t-inherit="barcodes.BarcodeScanner" t-inherit-mode="primary">
    <xpath expr="//div[hasclass('o_barcode_mobile_container')]" position="replace">
        <!-- <div class="o_hr_attendance_kiosk d-flex justify-content-around" t-att-class="{'position-relative' : !isDisplayStandalone}">
            <button t-if="isBarcodeScannerSupported" t-on-click="openMobileScanner" class="o_mobile_barcode btn btn-light btn-lg p-5 rounded-3" t-att-class="{'position-absolute' : !isDisplayStandalone}">
                <i class="fa fa-3x fa-barcode mb-3"/>
                <span class="d-block">Scan your badge</span>
            </button>
           
        </div> -->
        
            <h2 class="fw-bolder">Welcome Back</h2>
            <p class="text-muted small">Please scan your badge or face the camera to begin your shift.</p>
            <div class="d-flex gap-3">
                <button t-if="isBarcodeScannerSupported" t-on-click="openMobileScanner" class="o_mobile_barcode btn btn-light shadow rounded-3">
                    <div class="position-relative d-flex align-items-center justify-content-center">
                        <svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" fill="none"><path stroke="#1d1d1f" stroke-linecap="round" stroke-width="3" d="M21 21v8.33M29 21v8.33M43.75 6.25h-4.17a4.17 4.17 0 0 0-4.16 4.17v4.16M6.25 6.25h4.17a4.17 4.17 0 0 1 4.16 4.17v4.16M6.25 43.75h4.17a4.17 4.17 0 0 0 4.16-4.17v-4.16m29.17 8.33h-4.17a4.17 4.17 0 0 1-4.16-4.17v-4.16m-20.84-12.5v4.16m20.84-4.16v4.16"/></svg>
                        <div class="i_barcode_scanner_icon_scan"></div>
                    </div>
                    <span class="d-block smaller text-muted mt-2">Scan your badge</span>
                </button>
                <button class="btn btn-light shadow" t-if="this.props.kioskMode !== 'barcode'" t-on-click="() => this.props.switchSmallManual()">
                    <svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" fill="none"><path stroke="#1d1d1f" stroke-width="3" d="M15.56 23.1v-7.6c0-2.52 1-4.94 2.76-6.72a9.42 9.42 0 0 1 16.12 6.72v7.6m-22.66 0h26.44c2.09 0 3.78 1.7 3.78 3.8v13.3c0 2.1-1.7 3.8-3.78 3.8H11.78A3.79 3.79 0 0 1 8 40.2V26.9c0-2.1 1.7-3.8 3.78-3.8Z"/></svg>
                    <span class="d-block smaller text-muted mt-2">Identify Manually</span>
                </button>
            </div>
             <a t-if="!isDisplayStandalone" class="o_hr_attendance_install_btn btn btn-secondary d-flex align-items-center justify-content-center fw-bolder position-absolute"
                t-att-href="installURL" target="_blank">Install</a>
        
    </xpath>
</t>

<t t-name="hr_attendance.PublicKiosksSettingScreen">
    <div class="align-self-center" t-att-class="{'h2 mt-5': !env.isSmall, 'my-3 text-center h5': env.isSmall}">
        Choose how to record attendances
    </div>
    <div class="o_hr_kiosk_mode_main d-flex m-auto" t-att-class="{'gap-5': !env.isSmall, 'gap-3 flex-column': env.isSmall}">
        <div class="d-flex flex-column align-items-center text-center gap-2" t-att-style="!env.isSmall ? 'max-width: min-content;' : ''">
            <button
                t-on-click="() => this.setSetting('manual')"
                class="btn btn-light"
                t-att-class="{
                    'd-flex flex-row rounded-2 ps-2 align-items-center gap-2' : env.isSmall,
                    'btn-lg rounded-3': !env.isSmall
                }">
                <t t-if="env.isSmall">
                    <img src="/hr_attendance/static/img/tablet-pin.svg" alt="Manual Attendance" width="40%"/>
                    <h6 class="m-0">Manually (optional PIN)</h6>
                </t>
                <t t-else="">
                    <img src="/hr_attendance/static/img/tablet-pin.svg" height="170px" alt="Manual Attendance"/>
                </t>
            </button>
            <t t-if="!env.isSmall">
                <h5 class="m-0">Select on Tablet</h5>
                <em>with optional PIN code</em>
            </t>
        </div>
        <div class="d-flex flex-column align-items-center text-center gap-2" t-att-style="!env.isSmall ? 'max-width: min-content;' : ''">
            <button
                t-on-click="() => this.setSetting('barcode')"
                class="btn btn-light"
                t-att-class="{
                    'flex-row d-flex rounded-2 ps-2 align-items-center gap-2' : env.isSmall,
                    'btn-lg rounded-3': !env.isSmall
                }">
                <t t-if="env.isSmall">
                    <img src="/hr_attendance/static/img/tablet-cam.svg" alt="Attendance with barcode" width="40%"/>
                    <h6 class="m-0">Badge with Barcode</h6>
                </t>
                <t t-else="">
                    <img src="/hr_attendance/static/img/tablet-cam.svg" height="170px" alt="Attendance with barcode"/>
                </t>
            </button>
            <t t-if="!env.isSmall">
                <h5 class="m-0 w-75">Badge with Barcode on Tablet</h5>
            </t>
        </div>
        <div class="d-flex flex-column align-items-center text-center gap-2" t-att-style="!env.isSmall ? 'max-width: min-content;' : ''">
            <button
                t-on-click="() => this.setSetting('barcode_manual')"
                class="btn btn-light"
                t-att-class="{
                    'flex-row d-flex rounded-2 ps-2 align-items-center gap-2' : env.isSmall,
                    'btn-lg rounded-3': !env.isSmall
                }">
                <t t-if="env.isSmall">
                    <img src="/hr_attendance/static/img/tablet-rfid.svg" alt="Manual Attendance or with barcode" width="40%"/>
                    <h6 class="m-0">RFID Token with reader</h6>
                </t>
                <t t-else="">
                    <img src="/hr_attendance/static/img/tablet-rfid.svg" height="170px"
                    alt="Manual Attendance or with barcode"/>
                </t>
            </button>
            <t t-if="!env.isSmall">
                <h5 class="m-0 w-75">RFID Token with reader on tablet</h5>
            </t>
        </div>
    </div>
</t>

<t t-name="hr_attendance.public_kiosk_app">
    <MainComponentsContainer/>
    <CardLayout fromTrialMode="this.props.fromTrialMode" companyImageUrl="this.companyImageUrl" kioskReturn.bind="kioskReturn" activeDisplay = "this.state.active_display">
        <t t-if="this.state.active_display === 'settings'">
            <t t-call="hr_attendance.PublicKiosksSettingScreen"/>
        </t>
        <t t-if="this.state.active_display === 'main'">
            <t t-if="state.displayDemoMessage">
                <div
                    class="alert alert-info flex-row justify-content-between d-flex smaller border-0"
                    style="box-shadow: inset 0 2px 3px rgba(255, 255, 255, 0.3), inset 0 -2px 3px rgba(0, 0, 0, 0.2), 0 8px 20px rgba(0, 0, 0, 0.2);"
                    t-att-class="{'align-self-center col-6': !env.isSmall}"
                    t-att-style="!env.isSmall? 'min-width: fit-content;' : ''">
                        <div>
                            Connect an RFID reader, and scan a token.
                            <DocumentationLink path="'/applications/hr/attendances/hardware.html'" label.translate="'Read the Documentation'" alertLink="true"/>/
                            <!-- <DocumentationLink path="'https://www.amazon.fr/s?i=merchant-items&amp;me=A8A1OT6EFYV9W'" label.translate="'Buy an RFID Device'" alertLink="true"/> -->
                            <DocumentationLink path="'https://shopee.co.id/search?keyword=rfid%20devices'" label.translate="'Get an RFID Device'" alertLink="true"/>
                        </div>
                        <button t-on-click="removeDemoMessage" type="button" class="btn-close float-end ms-2" title="Close"/>
                </div>
            </t>
            <div class="o_hr_kiosk_mode_main d-flex flex-column gap-3 m-auto align-items-center">
                <div class="i_hr_attendance_kiosk_bg d-flex flex-column justify-content-center align-items-center position-relative text-center">
                    <t t-if="this.props.kioskMode !== 'manual' and !this.state.smallManual">
                        <KioskBarcodeScanner
                            kioskMode="this.props.kioskMode"
                            fromTrialMode="this.props.fromTrialMode"
                            token="this.props.token"
                            barcodeSource="this.props.barcodeSource"
                            onBarcodeScanned="(ev) => this.onBarcodeScanned(ev)"
                            switchSmallManual="this.switchSmallManual.bind(this)"/>
                        <div class="o_hr_kiosk_mode_main mt-3" t-if="this.props.fromTrialMode">
                            <button t-on-click="() => this.newSetUp()"
                                    class="btn btn-light smaller rounded-3"
                                    style="box-shadow: inset 0 2px 3px rgba(255, 255, 255, 0.3), inset 0 -2px 3px rgba(0, 0, 0, 0.2), 0 8px 20px rgba(0, 0, 0, 0.2);">
                                <span >New Set-up (Employee/Badge)</span>
                            </button>
                        </div>
                    </t>
                    <t t-if="this.state.smallManual">
                        <KioskSmallManualSelection
                            displayBackButton="!this.manualKioskMode || this.props.fromTrialMode"
                            departments="this.props.departments"
                            onSelectEmployee="(e) => this.kioskConfirm(e)"
                            onClickBack.bind="() => this.switchSmallManual()"
                            token="this.props.token"/>
                    </t>
                </div>
            </div>
            <div class="o_hr_kiosk_mode_bottom d-flex flex-column flex-md-row gap-2 align-items-center justify-content-between my-5">
                <!-- <t t-if="this.props.kioskMode !== 'barcode'">
                    <button t-on-click="() => this.switchDisplay('manual')"  class="btn btn-light btn-lg rounded-3">
                        <i class="fa fa-user-o me-2"/>
                        <span >Identify Manually</span>
                    </button>
                    <span>
                        Powered by <img height="32" src="/web/static/img/logo.png" alt="Inphms Logo"/>
                    </span>
                </t>
                <t t-else=""> -->
                    <div class="o_hr_kiosk_mode_bottom mx-auto smaller text-muted">
                        Powered by <img height="22" src="/web/static/img/logo.png" alt="Inphms Logo"/>
                    </div>
                <!-- </t> -->
            </div>
        </t>
        <t t-if="this.state.active_display === 'manual'">
            <KioskManualSelection
                displayBackButton="!this.manualKioskMode || this.props.fromTrialMode"
                departments="this.props.departments"
                onSelectEmployee="(e) => this.kioskConfirm(e)"
                onClickBack="() => this.kioskReturn()"
                token="this.props.token"/>
        </t>
        <t t-if="this.state.active_display === 'greet'">
            <KioskGreetings employeeData="this.employeeData" kioskReturn="() => this.kioskReturn(true)"/>
        </t>
        <t t-if="this.state.active_display === 'pin'">
            <KioskPinCode
                employeeData="this.employeeData"
                onPinConfirm="(id, pin) => this.onManualSelection(id, pin)"
                onClickBack="() => this.kioskReturn()"/>
        </t>
    </CardLayout>
</t>
</templates>
